<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validasi Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .error-message {
            color: red;
            font-size: 0.9rem;
        }
    </style>
</head>

<body class="bg-light">
    <!-- Loading Screen -->
    <div id="loading" class="d-flex justify-content-center align-items-center vh-100 bg-white">
        <div class="spinner-border text-primary" role="status" style="width: 4rem; height: 4rem;">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <div class="container mt-5">
        <div class="card p-4 shadow" style="max-width: 500px; margin: auto;">
            <h4 class="text-center mb-3">Form Validasi</h4>
            <form id="validasiForm" onsubmit="return validateForm(event)">
                <div class="mb-3">
                    <label for="nama" class="form-label">Nama Lengkap</label>
                    <input type="text" id="nama" class="form-control" placeholder="Nama Anda" required>
                    <div id="namaError" class="error-message"></div>
                </div>

                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="email@example.com" required>
                    <div id="emailError" class="error-message"></div>
                </div>

                <div class="mb-3">
                    <label for="password" class="form-label">Kata Sandi</label>
                    <input type="password" id="password" class="form-control" placeholder="Password" required>
                    <div id="passwordError" class="error-message"></div>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Kirim</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function validateForm(event) {
            event.preventDefault(); // Mencegah submit default

            const nama = document.getElementById("nama").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;

            let valid = true;

            // Reset pesan error
            document.getElementById("namaError").textContent = "";
            document.getElementById("emailError").textContent = "";
            document.getElementById("passwordError").textContent = "";

            // Validasi Nama (5 - 20 karakter)
            if (nama.length < 3 || nama.length > 20) {
                document.getElementById("namaError").textContent = "Nama harus 5-20 karakter.";
                valid = false;
            }

            // Validasi Email Format
            const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
            if (!emailPattern.test(email)) {
                document.getElementById("emailError").textContent = "Format email tidak valid.";
                valid = false;
            }

            // Validasi Password
            const minLength = /.{8,}/;
            const hasUpper = /[A-Z]/;
            const hasLower = /[a-z]/;
            const hasDigit = /[0-9]/;

            if (!minLength.test(password)) {
                document.getElementById("passwordError").textContent = "Password minimal 8 karakter.";
                valid = false;
            } else if (!hasUpper.test(password)) {
                document.getElementById("passwordError").textContent = "Password harus mengandung huruf besar.";
                valid = false;
            } else if (!hasLower.test(password)) {
                document.getElementById("passwordError").textContent = "Password harus mengandung huruf kecil.";
                valid = false;
            } else if (!hasDigit.test(password)) {
                document.getElementById("passwordError").textContent = "Password harus mengandung angka.";
                valid = false;
            }

            // Jika valid, arahkan ke halaman index.html
            if (valid) {
                window.location.href = "index.html";
            }

            return false;
        }

    </script>

</body>

</html>